#!/bin/bash
set -euo pipefail

echo ""
echo "========================================"
echo "  chezmoi apply complete!"
echo "========================================"
echo ""

{{ if and (eq .chezmoi.os "linux") (eq .machineType "desktop") -}}
echo "==> Configuring GNOME dock favorites..."
gsettings set org.gnome.shell favorite-apps "[\
'org.gnome.Nautilus.desktop', \
'org.gnome.Terminal.desktop', \
'chromium_chromium.desktop', \
'slack_slack.desktop', \
'code_code.desktop', \
'dbeaver-ce_dbeaver-ce.desktop', \
'org.gnome.Calculator.desktop'\
]"

echo "==> Disabling screen blank and auto-suspend..."
gsettings set org.gnome.desktop.session idle-delay 0
gsettings set org.gnome.desktop.screensaver lock-enabled false
gsettings set org.gnome.settings-daemon.plugins.power sleep-inactive-ac-type 'nothing'
gsettings set org.gnome.settings-daemon.plugins.power sleep-inactive-battery-type 'nothing'
{{ end -}}

echo "Done! Open a new terminal to start using zsh."
